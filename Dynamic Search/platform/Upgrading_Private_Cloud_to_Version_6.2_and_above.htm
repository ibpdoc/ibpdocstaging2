<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="concept _Skins_Side_Nav_2023_feb" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="0" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" /><title>Upgrading Private Cloud to Version 6.2 and above</title>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/ib_platform.css" rel="stylesheet" type="text/css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-164223934-1">
        </script>
        <script>/* <![CDATA[ */
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'UA-164223934-1');
	/* ]]> */</script>
        <script src="../Resources/Scripts/dynamic-search.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-left is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" role="banner" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Welcome.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="4" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div style=" text-align: right; color:white; font-size: 9pt; background:#001649 ; margin-bottom: 15px; padding: 4px 12px; ">Documentation Version 
			<select id="versionSelect"><option value="v6.7.1">6.7.1</option><option value="v6.7.0">6.7.0</option><option value="v6.6.1">6.6.1</option><option value="v6.6">6.6</option></select><script>/* <![CDATA[ */
				const select = document.querySelector('#versionSelect');
				select.addEventListener('change', function() {
				const selectedVersion = this.value;
				const currentUrl = window.location.href;
				const newUrl = currentUrl.replace(/\/v\d+(\.\d+(\.\d+)?)?\//, `/${selectedVersion}/`);
				window.location.href = newUrl;
				});
		/* ]]> */</script></div>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <div class="home-container">
                                        <div class="topic-body" role="main" id="mc-main-content">
                                            <h1>Upgrading Private Cloud to Version 6.2 and above</h1>
                                            <div class="note"><b>Note</b>:<p>Before upgrading to <b><span class="mc-variable IB.CompanyName variable">Infinite Blue</span><span class="mc-variable IB.ProductName variable">Platform</span> 6.5.1.x</b> from any of the previous major releases (like <b>6.4.x</b>, <b>6.3.x</b> or <b>6.2.x</b>), make sure to request a new license for the version <b>6.5.x.x</b>. Consequently, the server should operate properly once the upgrade is completed.</p></div>
                                            <p>The following steps describe how to upgrade <span class="mc-variable IB.ProductName variable">Platform</span> Private Cloud to Version 6.2 and above:</p>
                                            <ol>
                                                <li value="1">
                                                    <p>Stop Tomcat.</p>
                                                </li>
                                                <li value="2">
                                                    <p>Stop Database.</p>
                                                </li>
                                                <li value="3">
                                                    <p>Make a copy of your existing <span class="mc-variable IB.ProductName variable">Platform</span> <code>config</code>, <code>storage </code>and <code>rollbase\personalize</code> folders.</p>
                                                </li>
                                                <li value="4">
                                                    <p>Make a copy of your existing third-party jars, E.g. <code>mysql-connect.jar</code></p>
                                                </li>
                                                <li value="5">
                                                    <p><a name="Step5"></a>If you have any custom files, such as FusionCharts, in the <u>webapps</u> folder of your Tomcat instance, copy these to a folder for later use.</p>
                                                    <h2>Using installer</h2>
                                                    <ol style="list-style-type: lower-alpha;">
                                                        <li value="1">If you installed using the <span class="mc-variable IB.ProductName variable">Platform</span> installer, run uninstall. You can launch it from the <code>Rollbase\uninstall</code> folder.</li>
                                                        <li value="2">Make sure all previous version folders are deleted. If not, delete manually.</li>
                                                        <li value="3">Install 6.2 or above using the installer.</li>
                                                    </ol>
                                                    <h2>Using your own External Tomcat</h2>
                                                    <ol style="list-style-type: lower-alpha;">
                                                        <li value="1">
                                                            <p>Keep third-party jars (e.g. <code>mysql-connect.jar</code>) and tomcat jars in Tomcat lib. Remove all other (<span class="mc-variable IB.ProductName variable">Platform</span>) jars.</p>
                                                        </li>
                                                        <li value="2">Delete the following folders from the <u>webapps</u> folder: <u>master</u>, <u>router</u>, <u>prod1</u>, <u>search</u>, <u>storage</u>, <u>rest</u>, <u>webapi</u></li>
                                                        <li value="3">Extract <code>lib.zip</code> to <code>&lt;ROLLBASE_HOME&gt;/lib folder</code>. It contains all <span class="mc-variable IB.ProductName variable">Platform</span> jars. If you already have <code>lib</code> folder, delete entire folder and extract again.</li>
                                                        <li value="4">Extract <code>rollbase.zip</code> to <code>&lt;ROLLBASE_HOME&gt;</code></li>
                                                        <li value="5">Extract <code>webapps.zip</code> to Tomcat’s <code>webapps</code> folder.</li>
                                                        <li value="6">
                                                            <p>Modify Tomcat’s <code>Catalina.properties</code> file and replace the following line to include <code>Rollbase/lib</code> jars. File is available at <code>&lt;TOMCAT_HOME&gt;/conf/catalina.properties</code></p>
                                                            <p class="Code_Snippet_grayed">common.loader="${catalina.base}/lib","${catalina.base}/lib/*.jar","${catalina.base}/rollbase/lib","${catalina.base}/rollbase/lib/*.jar",
"${catalina.home}/lib","${catalina.home}/lib/*.jar","${catalina.home}/rollbase/lib","${catalina.home}/rollbase/lib/*.jar"</p>
                                                        </li>
                                                    </ol>
                                                </li>
                                                <li value="6">Copy all the backed up third-party jars to Tomcat’s <code>lib</code> folder from this path <code>&lt;TOMCAT_HOME&gt;/lib</code>.</li>
                                                <li value="7">
                                                    <p>Copy all the files from the backed up <code>config</code> folder to <code>&lt;ROLLBASE_HOME&gt;/config</code> folder. Do not copy paste the entire <code>config</code> folder.</p>
                                                    <div class="note"><b>Note</b>: Make sure that the <code>WidgetDefinitions</code> directory and <code>widgetIndexes.json</code> file are existing in the <code>config</code> folder, else the same can be copied from <code>rollbase.zip</code>'s <code>config</code> folder. (Applicable only for 6.0 and above versions only)</div>
                                                    <div class="note"><b>Note: </b>
                                                        <ul>
                                                            <li>
                                                                <p>In <span style="font-weight: bold;" class="mc-variable IB.ProductName variable">Platform</span><b> 6.2</b>, in the <code>cluster-config.xml</code>, <code>master-cluster-config.xml</code>, and <code>prod-cluster-config.xml</code> files of the <code>config</code> folder, the <code>&lt;group&gt;…&lt;/group&gt;</code>  node must be replaced by <code>&lt;cluster-name&gt;…&lt;/cluster-name&gt;</code>.</p>
                                                                <p>For instance, replace the following:</p>
                                                                <p xml:space="preserve" class="Code_Snippet_grayed">&lt;group&gt;
<br />    &lt;name&gt;rb_global&lt;/name&gt;<br />    &lt;password&gt;rb_global&lt;/password&gt;
<br />&lt;/group&gt;</p>
                                                                <p>With the following:</p>
                                                                <p xml:space="preserve" class="Code_Snippet_grayed">&lt;cluster-name&gt;rb_global&lt;/cluster-name&gt;
</p>
                                                            </li>
                                                            <li>
                                                                <p>In the <code>cluster-config.xml</code> file of the <code>config</code> folder, remove the following attribute from the <code>&lt;replicatedmap&gt;… &lt;/replicatedmap&gt;</code> node:</p>
                                                                <p xml:space="preserve" class="Code_Snippet_grayed">&lt;replication-delay-millis&gt;0&lt;/replication-delay-millis&gt;</p>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <p>If you are using JDK 9 or above, then add the following commands to your Java arguments in your <code>tomcat/bin/setenv</code>.</p>
                                                    <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                        <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>java --add-modules java.se \<br />&#160;&#160;--add-exports java.base/jdk.internal.ref=ALL-UNNAMED \<br />&#160;&#160;--add-opens java.base/java.lang=ALL-UNNAMED \<br />&#160;&#160;--add-opens java.base/java.nio=ALL-UNNAMED \<br />&#160;&#160;--add-opens java.base/sun.nio.ch=ALL-UNNAMED \<br />&#160;&#160;--add-opens java.management/sun.management=ALL-UNNAMED \<br />&#160;&#160;--add-opens jdk.management/com.ibm.lang.management.internal=ALL-UNNAMED \<br />&#160;&#160;--add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED</code></pre>
                                                        </div>
                                                    </div>
                                                    <p>
            For instance, the following commands have been added in the <code>setenv.bat</code> file.</p>
                                                    <p class="Code_Snippet_grayed">set JAVA_OPTS=%JAVA_OPTS% --add-modules java.se --add-exports java.base/jdk.internal.ref=ALL-UNNAMED<br />set JAVA_OPTS=%JAVA_OPTS% --add-opens java.base/java.nio=ALL-UNNAMED --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED<br />set JAVA_OPTS=%JAVA_OPTS% --add-opens java.base/sun.nio.ch=ALL-UNNAMED --add-opens java.management/sun.management=ALL-UNNAMED</p>
                                                    <p>For more information, see <a href="https://docs.hazelcast.com/imdg/4.2/installation/running-in-modular-java.html"><p>Running in Modular Java.<br /></p></a></p>
                                                    <div class="note"><b>Note</b>: If you are upgrading to <span style="font-weight: bold;" class="mc-variable IB.ProductName variable">Platform</span><b> 6.3</b> and using <u>GraalJS</u> as a runtime to execute JavaScripts to improve performance, add the following commands to the <code>setenv.bat</code> file.<p class="Code_Snippet_grayed">set "JAVA_OPTS=%JAVA_OPTS% -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler --module-path=%CATALINA_HOME%/rollbase/lib/graal-sdk-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/truffle-api-21.1.0.jar --upgrade-module-path=%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-management-21.1.0.jar"</p><p>For more information, see <a href="GraalVM_JavaScript.htm">GraalVM&#160;JavaScript.</a></p></div>
                                                </li>
                                                <li value="8">
                                                    <p>Copy the storage folder to the new storage server node.</p>
                                                </li>
                                                <li value="9">
                                                    <p>Copy the personalize folder to <code>&lt;ROLLBASE_HOME&gt;/personalize</code>.</p>
                                                </li>
                                                <li value="10">
                                                    <p>If you saved any custom files from the <u>webapps</u> folder as described in <a href="#Step5">Step 5</a>, copy them into the new installation.</p>
                                                </li>
                                                <li value="11">
                                                    <p>While upgrading to <span class="mc-variable IB.ProductName variable">Platform</span> 6.2, ensure that you remove outdated third-party JAR files that have been replaced. Remove the following JAR files:</p>
                                                    <ul>
                                                        <li>
                                                            <p>hazelcast-all-3.12.12.jar (replaced with hazelcast-all-4.2.1.jar)</p>
                                                        </li>
                                                        <li>
                                                            <p>elasticsearch-rest-client-6.5.0.jar (replaced with elasticsearch-rest-client-7.14.0.jar)</p>
                                                        </li>
                                                        <li>
                                                            <p>icu4j-67_1.jar (replaced with icu4j-69.1.jar)</p>
                                                        </li>
                                                        <li>
                                                            <p>jackson-core-asl-1.9.5.jar</p>
                                                        </li>
                                                        <li>
                                                            <p>jackson-mapper-asl-1.9.5.jar</p>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li value="12">In the <code>Rollbase\sql</code> folder, find the appropriate script(s) to update your database. If you are upgrading from a version other than the previous release, you will need to use multiple scripts, starting with the next version higher than your existing installation and continuing until you reach the current script.</li>
                                                <li value="13">Open the <code>sql</code> script(s), and do the following:<ol style="list-style-type: lower-alpha;"><li value="1">Uncomment the section for your database type.</li><li value="2">Verify that the sections for other database types are commented out.</li></ol></li>
                                                <li value="14">
                                                    <p>Execute the updated <code>sql</code> files.</p>
                                                </li>
                                                <li value="15">Start the Tomcat.</li>
                                                <li value="16">After you have upgraded your Private Cloud, follow the steps as described in  <a href="Upgrading_Private_Cloud_to_Version_5.x_until_5.5.htm#Re-indexing_Customer_Tenants">re-index customer tenants</a>.</li>
                                            </ol>
                                        </div>
                                    </div>
                                    <div class="panel">
                                        <div class="right-align"><a class="footer1" href="https://www.linkedin.com/company/infiniteblue/" target="_blank"><img src="https://img.icons8.com/ios-filled/25/0572ed/linkedin-2--v1.png" alt="Linkedin" /></a><a class="footer1" href="https://twitter.com/InfiniteBlueHQ" target="_blank"><img src="https://img.icons8.com/ios-filled/25/0572ed/twitter.png" alt="Twitter" /></a><a class="footer1last" href="https://www.youtube.com/channel/UCRa_FE0f3k9KJrNJyAT39Hg/featured" target="_blank"><img src="https://img.icons8.com/ios-glyphs/25/0572ed/youtube-play.png" alt="YouTube" /></a>
                                        </div>
                                        <div class="right-align-2"><a class="footer2" href="https://www.infiniteblue.com" target="_blank">Copyright © 2023 Infinite Blue. All Rights Reserved.</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>