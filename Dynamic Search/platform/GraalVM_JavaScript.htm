<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="concept _Skins_Side_Nav_2023_feb" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="Adding business logic " data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="0" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" /><title>Graal VM JavaScript</title>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/ib_platform.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/TableStyles/ib-table.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-164223934-1">
        </script>
        <script>/* <![CDATA[ */
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'UA-164223934-1');
	/* ]]> */</script>
        <script src="../Resources/Scripts/dynamic-search.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-left is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" role="banner" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../Welcome.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="4" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div style=" text-align: right; color:white; font-size: 9pt; background:#001649 ; margin-bottom: 15px; padding: 4px 12px; ">Documentation Version 
			<select id="versionSelect"><option value="v6.7.1">6.7.1</option><option value="v6.7.0">6.7.0</option><option value="v6.6.1">6.6.1</option><option value="v6.6">6.6</option></select><script>/* <![CDATA[ */
				const select = document.querySelector('#versionSelect');
				select.addEventListener('change', function() {
				const selectedVersion = this.value;
				const currentUrl = window.location.href;
				const newUrl = currentUrl.replace(/\/v\d+(\.\d+(\.\d+)?)?\//, `/${selectedVersion}/`);
				window.location.href = newUrl;
				});
		/* ]]> */</script></div>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <div class="home-container">
                                        <div class="topic-body" role="main" id="mc-main-content">
                                            <h1 class="concepttitle">GraalVM JavaScript <span class="beta">Beta</span></h1>
                                            <h2>Introduction</h2>
                                            <p>Platform uses ‘Rhino’ (Mozilla) JavaScript Engine (JS Engine) to run JavaScript inside the Platform. Rhino engine has certain limitations; it does not support the java script features - promises and await. Therefore, we have evaluated other JavaScript engines and identified Graal JS (by GraalVM) as the successor for Rhino Engine. Graal JS is fully compatible with the latest ECMA script 2020 specification. Its performance is better than Rhino.</p>
                                            <p>For instance, the example below shows how promises can be created with the async-await functionality. Rhino engine does not support it, however, Graal JS does support it.</p>
                                            <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code><span style="color: #333333; font-weight: bold; ">var</span> menuPicklist = rbv_api.getPicklist(<span style="color: #dd1144; ">"XYZHotel"</span>, <span style="color: #dd1144; ">"Item"</span>, <span style="color: #008080; ">null</span>);<br /><span style="color: #333333; font-weight: bold; ">var</span> menu = rbv_api.jsonToString(menuPicklist);<br /><span style="color: #999988; font-style: italic; ">// The following function returns a promise that resolves if the customer</span><br /><span style="color: #999988; font-style: italic; ">// orders something from the menu:</span><br /><span style="color: #333333; font-weight: bold; ">function</span> <span style="color: #990000; font-weight: bold; ">order_food</span> (order) {<br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">let</span> promise = <span style="color: #333333; font-weight: bold; ">new</span> <span style="color: #0086b3; ">Promise</span>((resolve, reject) =&gt; {<br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">if</span>(menu.includes(order)) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;resolve();<br />&#160;&#160;&#160;&#160;}<span style="color: #333333; font-weight: bold; ">else</span> {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject(<span style="color: #dd1144; ">'This item is not on the menu.'</span>);<br />&#160;&#160;}<br />});<br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">return</span> promise;<br />}<br /><span style="color: #999988; font-style: italic; ">// The following function returns a promise that resolves if the customer</span><br /><span style="color: #999988; font-style: italic; ">// pays 20 or more for the food:</span><br /><span style="color: #333333; font-weight: bold; ">function</span> <span style="color: #990000; font-weight: bold; ">make_payment</span> (payment) {<br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">let</span> promise = <span style="color: #333333; font-weight: bold; ">new</span> <span style="color: #0086b3; ">Promise</span>((resolve, reject) =&gt; {<br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">if</span>(payment &gt;= <span style="color: #008080; ">20</span>) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;resolve();<br />&#160;&#160;&#160;&#160;}<span style="color: #333333; font-weight: bold; ">else</span> {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject(<span style="color: #dd1144; ">'Your order costs 20.'</span>);<br />&#160;&#160;}<br />});<br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">return</span> promise;<br />}<br /><span style="color: #999988; font-style: italic; ">// await can only be used inside an async function</span><br /><span style="color: #333333; font-weight: bold; ">async</span> <span style="color: #333333; font-weight: bold; ">function</span> <span style="color: #990000; font-weight: bold; ">eat</span>(order, payment){<br />&#160;&#160;&#160;&#160;<span style="color: #999988; font-style: italic; ">// waiting for the promises to resolve</span><br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">try</span>{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">await</span> order_food(order);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(<span style="color: #dd1144; ">"Order received by the customer."</span>);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rbv_api.println(<span style="color: #dd1144; ">"Collect payment."</span>);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">await</span> make_payment(payment);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rbv_api.println(<span style="color: #dd1144; ">"Payment received."</span>);<br />&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;<span style="color: #999988; font-style: italic; ">// Catching errors or rejected promises</span><br />&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">catch</span> (error){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rbv_api.println(error);<br />&#160;&#160;&#160;&#160;}<br />}<br /><span style="color: #999988; font-style: italic; ">// Customer places his/her order and specifies the amount to pay</span><br /><span style="color: #999988; font-style: italic; ">// Play around with these parameters to fully understand what is going on.</span><br />eat(<span style="color: #dd1144; ">"Pizza"</span>, <span style="color: #008080; ">10</span>);<br /></code></pre>
                                                </div>
                                            </div>
                                            <h2>Enabling Graal JS</h2>
                                            <p>Currently, Platform includes both, Rhino Engine and Graal JS engine to run java script. However,  Rhino Engine support will be discontinued in the future once the Graal JS integration is fully stabilized.</p>
                                            <p>A new shared property <code>UseGraalJS </code>has been added in the <b>Add/Remove Features</b> section.  This is a boolean (checkbox) property.</p>
                                            <ul>
                                                <li>
                                                    <p>If checked or set to TRUE, Graal JS support is enabled at platform level and  tenant administrators can choose the JS engine to run their java script against.</p>
                                                </li>
                                                <li>
                                                    <p>If unchecked or set to FALSE, Graal JS support is disabled at platform level and platform forces the java script to run against Rhino JS engine.</p>
                                                </li>
                                                <li>
                                                    <p>The default is unchecked/FALSE.</p>
                                                </li>
                                            </ul>
                                            <p>In conjunction with the above shared property, a new tenant level property, <code>Switch To Graal JS</code> has been added to switch JS engine selection. This tenant property is shown only when the above shared property is checked.</p>
                                            <p>If this checkbox is left unchecked, then the default value for this property is considered as FALSE, and Rhino JS engine is selected by default. A Tenant Administrator should select this checkbox to enable Graal JS runtime at tenant level.</p>
                                            <p>
                                                <img src="../img/graal_JS_1.png" style="width: 915px;height: 432px;" alt="" />
                                            </p>
                                            <p>Graal JS (Community Edition) does not support setting a time limit for context. To work around setting the max time for java script execution, a new shared property, <code>MaxJSStatements</code> has been introduced in the <b><a href="Shared_Properties.htm#MaxJSStatements">Limits -&gt; Triggers</a></b> section to control the statement limit. The default value for this property is 10000. For more information, see <a href="Shared_Properties.htm">Shared Properties</a>.</p>
                                            <p>In formula debug, java script engine selection has been added to enable debug the formula using either Rhino or Graal JS. Whenever the java script engine selection changes, the formula is debugged against the selected JS engine.</p>
                                            <p>
                                                <img src="../img/graal_JS_3.png" style="width: 861px;height: 478px;" alt="" />
                                            </p>
                                            <h2>Invoking an external java class using Graal JS</h2>
                                            <p>The procedure to invoke an external java class in Platform using Graal JS is as follows:</p>
                                            <ol>
                                                <li value="1">
                                                    <p>Copy the jar file into <code>&lt;tomcat_home&gt;/lib</code> folder. </p>
                                                </li>
                                                <li value="2">
                                                    <p>Consider the sample code below. </p>
                                                    <ul>
                                                        <li>
                                                            <p>In the <b>Shared Properties</b> tab, add <code>org.test.sample.helloworld</code> to the <b>CustomClassFilter</b> text field.</p>
                                                            <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                                <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>package org.test.sample;<br />public <span style="color: #333333; font-weight: bold; ">class</span> <span style="color: #990000; font-weight: bold; ">helloworld</span> {<br />&#160;&#160;&#160;public <span style="color: #333333; font-weight: bold; ">static</span> <span style="color: #333333; font-weight: bold; ">void</span> main(<span style="color: #0086b3; ">String</span>[] args) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span style="color: #999988; font-style: italic; ">// TODO Auto-generated method stub</span><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;helloworld hw = <span style="color: #333333; font-weight: bold; ">new</span> helloworld();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hw.concat(args[<span style="color: #008080; ">0</span>],args[<span style="color: #008080; ">1</span>]);<br />&#160;&#160;&#160;}<br />&#160;&#160;&#160;public <span style="color: #0086b3; ">String</span> concat(<span style="color: #0086b3; ">String</span> a,<span style="color: #0086b3; ">String</span> b)<br />&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(a+b);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span style="color: #333333; font-weight: bold; ">return</span> a.concat(b);<br />&#160;&#160;&#160;}<br />}</code></pre>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <p>Log in as a customer, and add the below code in the script editor (For example: Object Script trigger)</p>
                                                            <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                                <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code><span style="color: #333333; font-weight: bold; ">var</span> test = <span style="color: #333333; font-weight: bold; ">new</span> Packages.org.test.sample.helloworld();<br /><span style="color: #333333; font-weight: bold; ">var</span> test2 = test.concat(<span style="color: #dd1144; ">"Hello"</span>,<span style="color: #dd1144; ">"world"</span>);<br />rbv_api.println(test2);</code></pre>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <p>Invoke the trigger. Observe and ensure that the output is correct.</p>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ol>
                                            <h2>Configurable Properties</h2>
                                            <p>The following shared properties can be configured based on the JS engine.</p>
                                            <table class="TableStyle-ib-table" style="mc-table-style: url('../Resources/TableStyles/ib-table.css');width: 100%;" cellspacing="0">
                                                <col style="width: 327px;" class="TableStyle-ib-table-Column-Column1" />
                                                <col style="width: 165px;" class="TableStyle-ib-table-Column-Column1" />
                                                <col style="width: 155px;" class="TableStyle-ib-table-Column-Column1" />
                                                <col style="width: 107px;" class="TableStyle-ib-table-Column-Column1" />
                                                <thead>
                                                    <tr class="TableStyle-ib-table-Head-Header1">
                                                        <th class="TableStyle-ib-table-HeadE-Column1-Header1">
                                                            <p>Shared </p>
                                                            <p>Property</p>
                                                        </th>
                                                        <th class="TableStyle-ib-table-HeadE-Column1-Header1">
                                                            <p>Rhino JS</p>
                                                        </th>
                                                        <th class="TableStyle-ib-table-HeadE-Column1-Header1">
                                                            <p>Graal JS</p>
                                                        </th>
                                                        <th class="TableStyle-ib-table-HeadD-Column1-Header1">Comments</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="TableStyle-ib-table-Body-Body1">
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>MaxJSTimeMs</code>
                                                        </td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">NA</td>
                                                        <td class="TableStyle-ib-table-BodyD-Column1-Body1">Maximum time for which the script is allowed to run in the JS engine. Currently, this property is only applicable for Rhino engine.</td>
                                                    </tr>
                                                    <tr class="TableStyle-ib-table-Body-Body1">
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>MaxJSStatements</code>
                                                        </td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">NA</td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                        <td class="TableStyle-ib-table-BodyD-Column1-Body1">Maximum number of script statements that are allowed as per the context. <p>This property is applicable only for Graal JS engine.</p></td>
                                                    </tr>
                                                    <tr class="TableStyle-ib-table-Body-Body1">
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>MaxFormulaSize</code>
                                                        </td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                        <td class="TableStyle-ib-table-BodyD-Column1-Body1">Maximum formula size.</td>
                                                    </tr>
                                                    <tr class="TableStyle-ib-table-Body-Body1">
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>JSOptimizationLevel</code>
                                                        </td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                        <td class="TableStyle-ib-table-BodyE-Column1-Body1">NA</td>
                                                        <td class="TableStyle-ib-table-BodyD-Column1-Body1">Optimization parameter for Rhino engine.</td>
                                                    </tr>
                                                    <tr class="TableStyle-ib-table-Body-Body1">
                                                        <td class="TableStyle-ib-table-BodyB-Column1-Body1"><code>CustomClassFilter</code>
                                                        </td>
                                                        <td class="TableStyle-ib-table-BodyB-Column1-Body1">Yes</td>
                                                        <td class="TableStyle-ib-table-BodyB-Column1-Body1">Yes</td>
                                                        <td class="TableStyle-ib-table-BodyA-Column1-Body1">Specifies predicate for allowing Java classes from the JS engine.</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <h2>Compatibility</h2>
                                            <p>Existing Rhino scripts should be able to run on Graal VM JavaScript as well. In case there is java interoperability inside the script, refer the <b><a href="#Migratio">Migration</a></b> section to update the script, and this is optional to comply with Graal JS syntax.</p>
                                            <p>For ServerSide APIs - follow the method parameter types as given in the documentation, otherwise it will throw type cast errors.</p>
                                            <p>Graal JS features such as promises, modules, etc. are not supported in Rhino. Therefore, Graal JS script with these features cannot run on Rhino. Otherwise, the scripts should run on both JavaScript Engines.</p>
                                            <h2><a name="Migratio"></a>Migration</h2>
                                            <p>Both, Rhino and GraalVM JavaScript engines support a similar set of syntax and semantics for Java interoperability. Significant differences relevant to migration are listed below.</p>
                                            <ul>
                                                <li>
                                                    <p>(Optional) Java.type(typename) instead of java.a.b.c.typename</p>
                                                    <p>GraalVM JavaScript does not put available Java classes in the JavaScript scope. You have to explicitly load the classes using Java.type(typename).</p>
                                                    <p>Example:</p>
                                                    <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                        <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code><span style="color: #333333; font-weight: bold; ">var</span> HashMap = Java.type(<span style="color: #dd1144; ">'java.util.HashMap'</span>);<br /><span style="color: #333333; font-weight: bold; ">var</span> map = <span style="color: #333333; font-weight: bold; ">new</span> HashMap();<br />map.put(<span style="color: #008080; ">1</span>, <span style="color: #dd1144; ">"a"</span>);<br />map.put(<span style="color: #008080; ">2</span>, <span style="color: #dd1144; ">"b"</span>)<br /><span style="color: #333333; font-weight: bold; ">var</span> mapSize = map.size();<br />rbv_api.println(<span style="color: #dd1144; ">"Map Size "</span> + mapSize);</code></pre>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <p>Console Output of Java Classes and Java Objects</p>
                                                    <p>GraalVM JavaScript provides a built-in print function. It tries to special-case its behavior on Java classes and Java objects to provide the most useful output.</p>
                                                </li>
                                                <li>
                                                    <p>JavaScript vs. Java Strings</p>
                                                    <p>GraalVM JavaScript uses Java strings internally to represent JavaScript strings. This makes it impossible to differentiate/identify if a specific string was created by JavaScript or by Java code. In GraalVM JavaScript, the JavaScript properties take precedence over Java fields or methods.</p>
                                                    <p>Example:</p>
                                                    <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                        <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code><span style="color: #333333; font-weight: bold; ">var</span> javaString = Java.type(<span style="color: #dd1144; ">'java.lang.String'</span>);<br /><span style="color: #333333; font-weight: bold; ">var</span> strVar = <span style="color: #333333; font-weight: bold; ">new</span> javaString(<span style="color: #dd1144; ">"Welcome to Graal JS"</span>);<br /><span style="color: #333333; font-weight: bold; ">var</span> strLength = strVar.length<br />rbv_api.println(<span style="color: #dd1144; ">"String length: "</span> + strLength);</code></pre>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                            <p>&#160;</p>
                                            <h2><a name="GraalVM"></a>GraalVM&#160;Compiler</h2>
                                            <p>Graal VM&#160;Compiler jars are added to the <span class="mc-variable IB.ProductName variable">Platform</span> to aid in for executing JavaScripts. In order to use GraalVM compiler, ensure the following:</p>
                                            <ul>
                                                <li>
                                                    <p>Specify the <code>JAVA_OPTS (--upgrade-module-path)</code>. </p>
                                                </li>
                                                <li>
                                                    <p>Add the following commands to the <code>setenv.bat</code> file located in your <code>bin</code> directory of your <code>tomcat</code> folder to use the GraalVM compiler. </p><pre>
set "JAVA_OPTS=%JAVA_OPTS% -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler --module-path=%CATALINA_HOME%/rollbase/lib/graal-sdk-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/truffle-api-21.1.0.jar --upgrade-module-path=%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-management-21.1.0.jar"</pre>
                                                </li>
                                            </ul>
                                            <div class="note"><b>Note</b>:<ul><li>The performance of <b>GraalVM</b> transcends over <b>Rhino</b> especially in the case of complex or time consuming javascripts.</li><li><p>It is also reported that <b>Rhino</b> utilized a considerable amount time for initial requests while the subsequent requests were performed faster. However, while executing any javascript, <b>GraalVM</b> performs better when the peak time is reached. </p></li><li><p>As <span class="mc-variable IB.ProductName variable">Platform</span> utilizes Stock JDK (OpenJDK11), the <b>GraalVM</b> JavaScript engine performance is fine tuned by using GraalVM compiler.</p></li><li><p> Considerably, there are certain limitations on the features and performance for GraalVM&#160;JavaScript when used with <u>GraalVM Community Edition JVM</u> and <u>OpenStock JDK</u> as compared to the <u>GraalVM Enterprise Edition</u>.</p></li><li><p>Few options in <b>GraalVM</b> JavaScript around performance fine tuning are experimental, hence it is not recommended for any usage on production instance.</p></li></ul></div>
                                        </div>
                                    </div>
                                    <div class="panel">
                                        <div class="right-align"><a class="footer1" href="https://www.linkedin.com/company/infiniteblue/" target="_blank"><img src="https://img.icons8.com/ios-filled/25/0572ed/linkedin-2--v1.png" alt="Linkedin" /></a><a class="footer1" href="https://twitter.com/InfiniteBlueHQ" target="_blank"><img src="https://img.icons8.com/ios-filled/25/0572ed/twitter.png" alt="Twitter" /></a><a class="footer1last" href="https://www.youtube.com/channel/UCRa_FE0f3k9KJrNJyAT39Hg/featured" target="_blank"><img src="https://img.icons8.com/ios-glyphs/25/0572ed/youtube-play.png" alt="YouTube" /></a>
                                        </div>
                                        <div class="right-align-2"><a class="footer2" href="https://www.infiniteblue.com" target="_blank">Copyright © 2023 Infinite Blue. All Rights Reserved.</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>