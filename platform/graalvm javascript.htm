<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="concept _Skins_EBFD_Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="Adding business logic " data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="0" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" /><title>Graal VM JavaScript</title>
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../resources/branding/branding.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/TableStyles/ib-table.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../xebresources/stylesheets/eb-styles.css" rel="stylesheet" type="text/css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <script src="../resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1200px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../communications/everbridge360.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <p>
                                        <script type="text/javascript">/*<![CDATA[*/ $(window).resize(function() {
				var winWidth = $(window).width();
				if (winWidth > 1279) {
				console.log('appendTo >1279');
				$("#header-links").appendTo("div.logo-wrapper");
				} else {
				console.log('appendTo <1279');
				$("#header-links").appendTo("#offCanvas .off-canvas-accordion");
				}
			});/*]]>*/</script>
                                        <script>/* <![CDATA[ */
				$( document ).ready(function() {
				$('.MCTopicPopupHotSpot').removeClass('MCTopic').addClass('MCTopicPopup');
				});

				if (window.self != window.top) {
				// topnav
				$('div.title-bar-container').css('display','none');

				// sidenav
				$('nav.sidenav-wrapper').css('display','none');
				
				// topicnav
				$('div.topicnav-wrapper').css('display','none');
	
				// tablet+phone
				$('nav.title-bar').css('display','none');
 
				$('a').attr('target','_parent');
				}
			/* ]]> */</script>
                                    </p>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <div class="Responsive-8-4">
                                        <div class="body-box">
                                            <div role="main" id="mc-main-content">
                                                <h1 class="concepttitle" id="GraalVMJavaScript" data-magellan-target="GraalVMJavaScript">GraalVM JavaScript</h1>
                                                <p><span class="beta">THIS FEATURE IS CURRENTLY IN BETA</span>
                                                </p>
                                                <h2 id="Introduction" data-magellan-target="Introduction">Introduction</h2>
                                                <p>Platform uses ‘Rhino’ (Mozilla) JavaScript Engine (JS Engine) to run JavaScript inside the Platform. Rhino engine has certain limitations; it does not support the java script features - promises and await. Therefore, we have evaluated other JavaScript engines and identified Graal JS (by GraalVM) as the successor for Rhino Engine. Graal JS is fully compatible with the latest ECMA script 2020 specification. Its performance is better than Rhino.</p>
                                                <p>For instance, the example below shows how promises can be created with the async-await functionality. Rhino engine does not support it, however, Graal JS does support it.</p>
                                                <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                    <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>var menuPicklist = rbv_api.getPicklist("XYZHotel", "Item", null);<br />var menu = rbv_api.jsonToString(menuPicklist);<br />// The following function returns a promise that resolves if the customer<br />// orders something from the menu:<br />function order_food (order) {<br />&#160;&#160;&#160;&#160;let promise = new Promise((resolve, reject) =&gt; {<br />&#160;&#160;&#160;&#160;if(menu.includes(order)) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;resolve();<br />&#160;&#160;&#160;&#160;}else {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject('This item is not on the menu.');<br />&#160;&#160;}<br />});<br />&#160;&#160;&#160;&#160;return promise;<br />}<br />// The following function returns a promise that resolves if the customer<br />// pays 20 or more for the food:<br />function make_payment (payment) {<br />&#160;&#160;&#160;&#160;let promise = new Promise((resolve, reject) =&gt; {<br />&#160;&#160;&#160;&#160;if(payment &gt;= 20) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;resolve();<br />&#160;&#160;&#160;&#160;}else {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject('Your order costs 20.');<br />&#160;&#160;}<br />});<br />&#160;&#160;&#160;&#160;return promise;<br />}<br />// await can only be used inside an async function<br />async function eat(order, payment){<br />&#160;&#160;&#160;&#160;// waiting for the promises to resolve<br />&#160;&#160;&#160;&#160;try{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;await order_food(order);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;("Order received by the customer.");<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rbv_api.println("Collect payment.");<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;await make_payment(payment);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rbv_api.println("Payment received.");<br />&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;// Catching errors or rejected promises<br />&#160;&#160;&#160;&#160;catch (error){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rbv_api.println(error);<br />&#160;&#160;&#160;&#160;}<br />}<br />// Customer places his/her order and specifies the amount to pay<br />// Play around with these parameters to fully understand what is going on.<br />eat("Pizza", 10);<br /></code></pre>
                                                    </div>
                                                </div>
                                                <h2 id="EnablingGraalJS" data-magellan-target="EnablingGraalJS">Enabling Graal JS</h2>
                                                <p>Currently, Platform includes both, Rhino Engine and Graal JS engine to run java script. However,  Rhino Engine support will be discontinued in the future once the Graal JS integration is fully stabilized.</p>
                                                <p>A new shared property <code>UseGraalJS </code>has been added in the <b>Add/Remove Features</b> section.  This is a boolean (checkbox) property.</p>
                                                <ul>
                                                    <li>
                                                        <p>If checked or set to TRUE, Graal JS support is enabled at platform level and  tenant administrators can choose the JS engine to run their java script against.</p>
                                                    </li>
                                                    <li>
                                                        <p>If unchecked or set to FALSE, Graal JS support is disabled at platform level and platform forces the java script to run against Rhino JS engine.</p>
                                                    </li>
                                                    <li>
                                                        <p>The default is unchecked/FALSE.</p>
                                                    </li>
                                                </ul>
                                                <p>In conjunction with the above shared property, a new tenant level property, <code>Switch To Graal JS</code> has been added to switch JS engine selection. This tenant property is shown only when the above shared property is checked.</p>
                                                <p>If this checkbox is left unchecked, then the default value for this property is considered as FALSE, and Rhino JS engine is selected by default. A Tenant Administrator should select this checkbox to enable Graal JS runtime at tenant level.</p>
                                                <p>
                                                    <img src="../img/graal js 1_915x432.png" style="width: 915;height: 432;" />
                                                </p>
                                                <p>Graal JS (Community Edition) does not support setting a time limit for context. To work around setting the max time for java script execution, a new shared property, <code>MaxJSStatements</code> has been introduced in the <b><a href="shared properties.htm#MaxJSStatements">Limits -&gt; Triggers</a></b> section to control the statement limit. The default value for this property is 10000. For more information, see <a href="shared properties.htm">Shared Properties</a>.</p>
                                                <p>In formula debug, java script engine selection has been added to enable debug the formula using either Rhino or Graal JS. Whenever the java script engine selection changes, the formula is debugged against the selected JS engine.</p>
                                                <p>
                                                    <img src="../img/graal js 3_861x478.png" style="width: 861;height: 478;" />
                                                </p>
                                                <h2 id="InvokinganexternaljavaclassusingGraalJS" data-magellan-target="InvokinganexternaljavaclassusingGraalJS">Invoking an external java class using Graal JS</h2>
                                                <p>The procedure to invoke an external java class in Platform using Graal JS is as follows:</p>
                                                <ol>
                                                    <li value="1">
                                                        <p>Copy the jar file into <code>&lt;tomcat_home&gt;/lib</code> folder. </p>
                                                    </li>
                                                    <li value="2">
                                                        <p>Consider the sample code below. </p>
                                                        <ul>
                                                            <li>
                                                                <p>In the <b>Shared Properties</b> tab, add <code>org.test.sample.helloworld</code> to the <b>CustomClassFilter</b> text field.</p>
                                                                <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                                    <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>package org.test.sample;<br />public class helloworld {<br />&#160;&#160;&#160;public static void main(String[] args) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;// TODO Auto-generated method stub<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;helloworld hw = new helloworld();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hw.concat(args[0],args[1]);<br />&#160;&#160;&#160;}<br />&#160;&#160;&#160;public String concat(String a,String b)<br />&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(a+b);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;return a.concat(b);<br />&#160;&#160;&#160;}<br />}</code></pre>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <p>Log in as a customer, and add the below code in the script editor (For example: Object Script trigger)</p>
                                                                <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                                    <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>var test = new Packages.org.test.sample.helloworld();<br />var test2 = test.concat("Hello","world");<br />rbv_api.println(test2);</code></pre>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <p>Invoke the trigger. Observe and ensure that the output is correct.</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ol>
                                                <h2 id="ConfigurableProperties" data-magellan-target="ConfigurableProperties">Configurable Properties</h2>
                                                <p>The following shared properties can be configured based on the JS engine.</p>
                                                <table class="TableStyle-ib-table" style="mc-table-style: url('../Resources/TableStyles/ib-table.css');width: 100%;" cellspacing="0">
                                                    <col style="width: 327px;" class="TableStyle-ib-table-Column-Column1" />
                                                    <col style="width: 165px;" class="TableStyle-ib-table-Column-Column1" />
                                                    <col style="width: 155px;" class="TableStyle-ib-table-Column-Column1" />
                                                    <col style="width: 107px;" class="TableStyle-ib-table-Column-Column1" />
                                                    <thead>
                                                        <tr class="TableStyle-ib-table-Head-Header1">
                                                            <th class="TableStyle-ib-table-HeadE-Column1-Header1">
                                                                <p>Shared </p>
                                                                <p>Property</p>
                                                            </th>
                                                            <th class="TableStyle-ib-table-HeadE-Column1-Header1">
                                                                <p>Rhino JS</p>
                                                            </th>
                                                            <th class="TableStyle-ib-table-HeadE-Column1-Header1">
                                                                <p>Graal JS</p>
                                                            </th>
                                                            <th class="TableStyle-ib-table-HeadD-Column1-Header1">Comments</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="TableStyle-ib-table-Body-Body1">
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>MaxJSTimeMs</code>
                                                            </td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">NA</td>
                                                            <td class="TableStyle-ib-table-BodyD-Column1-Body1">Maximum time for which the script is allowed to run in the JS engine. Currently, this property is only applicable for Rhino engine.</td>
                                                        </tr>
                                                        <tr class="TableStyle-ib-table-Body-Body1">
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>MaxJSStatements</code>
                                                            </td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">NA</td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                            <td class="TableStyle-ib-table-BodyD-Column1-Body1">Maximum number of script statements that are allowed as per the context. <p>This property is applicable only for Graal JS engine.</p></td>
                                                        </tr>
                                                        <tr class="TableStyle-ib-table-Body-Body1">
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>MaxFormulaSize</code>
                                                            </td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                            <td class="TableStyle-ib-table-BodyD-Column1-Body1">Maximum formula size.</td>
                                                        </tr>
                                                        <tr class="TableStyle-ib-table-Body-Body1">
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1"><code>JSOptimizationLevel</code>
                                                            </td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">Yes</td>
                                                            <td class="TableStyle-ib-table-BodyE-Column1-Body1">NA</td>
                                                            <td class="TableStyle-ib-table-BodyD-Column1-Body1">Optimization parameter for Rhino engine.</td>
                                                        </tr>
                                                        <tr class="TableStyle-ib-table-Body-Body1">
                                                            <td class="TableStyle-ib-table-BodyB-Column1-Body1"><code>CustomClassFilter</code>
                                                            </td>
                                                            <td class="TableStyle-ib-table-BodyB-Column1-Body1">Yes</td>
                                                            <td class="TableStyle-ib-table-BodyB-Column1-Body1">Yes</td>
                                                            <td class="TableStyle-ib-table-BodyA-Column1-Body1">Specifies predicate for allowing Java classes from the JS engine.</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <h2 id="Compatibility" data-magellan-target="Compatibility">Compatibility</h2>
                                                <p>Existing Rhino scripts should be able to run on Graal VM JavaScript as well. In case there is java interoperability inside the script, refer the <b><a href="#Migratio">Migration</a></b> section to update the script, and this is optional to comply with Graal JS syntax.</p>
                                                <p>For ServerSide APIs - follow the method parameter types as given in the documentation, otherwise it will throw type cast errors.</p>
                                                <p>Graal JS features such as promises, modules, etc. are not supported in Rhino. Therefore, Graal JS script with these features cannot run on Rhino. Otherwise, the scripts should run on both JavaScript Engines.</p>
                                                <h2 id="Migration" data-magellan-target="Migration"><a name="Migratio"></a>Migration</h2>
                                                <p>Both, Rhino and GraalVM JavaScript engines support a similar set of syntax and semantics for Java interoperability. Significant differences relevant to migration are listed below.</p>
                                                <ul>
                                                    <li>
                                                        <p>(Optional) Java.type(typename) instead of java.a.b.c.typename</p>
                                                        <p>GraalVM JavaScript does not put available Java classes in the JavaScript scope. You have to explicitly load the classes using Java.type(typename).</p>
                                                        <p>Example:</p>
                                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>var HashMap = Java.type('java.util.HashMap');<br />var map = new HashMap();<br />map.put(1, "a");<br />map.put(2, "b")<br />var mapSize = map.size();<br />rbv_api.println("Map Size " + mapSize);</code></pre>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <p>Console Output of Java Classes and Java Objects</p>
                                                        <p>GraalVM JavaScript provides a built-in print function. It tries to special-case its behavior on Java classes and Java objects to provide the most useful output.</p>
                                                    </li>
                                                    <li>
                                                        <p>JavaScript vs. Java Strings</p>
                                                        <p>GraalVM JavaScript uses Java strings internally to represent JavaScript strings. This makes it impossible to differentiate/identify if a specific string was created by JavaScript or by Java code. In GraalVM JavaScript, the JavaScript properties take precedence over Java fields or methods.</p>
                                                        <p>Example:</p>
                                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>var javaString = Java.type('java.lang.String');<br />var strVar = new javaString("Welcome to Graal JS");<br />var strLength = strVar.length<br />rbv_api.println("String length: " + strLength);</code></pre>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                                <p>&#160;</p>
                                                <h2 id="GraalVMCompiler" data-magellan-target="GraalVMCompiler"><a name="GraalVM"></a>GraalVM&#160;Compiler</h2>
                                                <p>Graal VM&#160;Compiler jars are added to the <span class="mc-variable IB.ProductName variable">Platform</span> to aid in for executing JavaScripts. In order to use GraalVM compiler, ensure the following:</p>
                                                <ul>
                                                    <li>
                                                        <p>Specify the <code>JAVA_OPTS (--upgrade-module-path)</code>. </p>
                                                    </li>
                                                    <li>
                                                        <p>Add the following commands to the <code>setenv.bat</code> file located in your <code>bin</code> directory of your <code>tomcat</code> folder to use the GraalVM compiler. </p><pre>
set "JAVA_OPTS=%JAVA_OPTS% -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler --module-path=%CATALINA_HOME%/rollbase/lib/graal-sdk-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/truffle-api-21.1.0.jar --upgrade-module-path=%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-management-21.1.0.jar"</pre>
                                                    </li>
                                                </ul>
                                                <div class="note"><b>Note</b>:<ul><li>The performance of <b>GraalVM</b> transcends over <b>Rhino</b> especially in the case of complex or time consuming javascripts.</li><li><p>It is also reported that <b>Rhino</b> utilized a considerable amount time for initial requests while the subsequent requests were performed faster. However, while executing any javascript, <b>GraalVM</b> performs better when the peak time is reached. </p></li><li><p>As <span class="mc-variable IB.ProductName variable">Platform</span> utilizes Stock JDK (OpenJDK11), the <b>GraalVM</b> JavaScript engine performance is fine tuned by using GraalVM compiler.</p></li><li><p> Considerably, there are certain limitations on the features and performance for GraalVM&#160;JavaScript when used with <u>GraalVM Community Edition JVM</u> and <u>OpenStock JDK</u> as compared to the <u>GraalVM Enterprise Edition</u>.</p></li><li><p>Few options in <b>GraalVM</b> JavaScript around performance fine tuning are experimental, hence it is not recommended for any usage on production instance.</p></li></ul></div>
                                            </div>
                                            <p id="return-to-top"><a href="#top"><img src="../xebresources/evbg/arrow_circle_up_24dp_1f1f1f_fill0_wght400_grad0_opsz24.png" /></a>
                                            </p>
                                        </div>
                                        <div class="topicnav-wrapper">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbarProxy mc-component nocontent" style="mc-topic-toolbar-items: Back QuickSearch AddTopicToFavorites;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie previous-topic-button" title="Go back" disabled="true">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                    <button class="button needs-pie next-topic-button" title="See what's next" disabled="true">
                                                        <div>
                                                            <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                                <div class="button-icon"> </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                            <br />
                                            <h4>In this topic</h4>
                                            <div class="sticky-container">
                                                <div data-sticky-container="" id="DCiOMpywuE-Gn9c08aGLow">
                                                    <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="DCiOMpywuE-Gn9c08aGLow:top" data-bottom-anchor="contentBody:bottom" data-scroll-container=".body-container" data-sticky-on="only screen and (min-width: 1201px)" data-scroll-container-on="only screen and (min-width: 1201px)">
                                                        <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 1201px)" class="topicMenu menu _Skins_TopicMenuProxy mc-component">
                                                            <li class="tree-node"><a href="#GraalVMJavaScript">GraalVM JavaScript</a>
                                                            </li>
                                                            <li>
                                                                <ul>
                                                                    <li class="tree-node"><a href="#Introduction">Introduction</a>
                                                                    </li>
                                                                    <li class="tree-node"><a href="#EnablingGraalJS">Enabling Graal JS</a>
                                                                    </li>
                                                                    <li class="tree-node"><a href="#InvokinganexternaljavaclassusingGraalJS">Invoking an external java class using Graal JS</a>
                                                                    </li>
                                                                    <li class="tree-node"><a href="#ConfigurableProperties">Configurable Properties</a>
                                                                    </li>
                                                                    <li class="tree-node"><a href="#Compatibility">Compatibility</a>
                                                                    </li>
                                                                    <li class="tree-node"><a href="#Migration">Migration</a>
                                                                    </li>
                                                                    <li class="tree-node"><a href="#GraalVMCompiler">GraalVM&#160;Compiler</a>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="home-footer">
                                        <table style="width: 100%;border-top-style: solid;border-top-width: 1px;border-top-color: #808080;">
                                            <col />
                                            <col />
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <p> </p>
                                                    </td>
                                                    <td style="text-align: left;">
                                                        <p>Content © 2025 Everbridge, Inc. All rights reserved. </p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>